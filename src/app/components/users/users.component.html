<div class="p-8 bg-gray-50 min-h-screen">
    <div class="flex justify-between items-center mb-8">
        <h1 class="text-4xl font-bold text-gray-800">User Management</h1>
        <button (click)="toggleAddForm()"
            class="bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg font-semibold transition-colors">
            {{ showAddForm ? 'Cancel' : 'Add User' }}
        </button>
    </div>

    <!-- Add User Form -->
    <div *ngIf="showAddForm" class="bg-white rounded-lg shadow-md p-6 mb-8">
        <h2 class="text-2xl font-bold text-gray-800 mb-4">Add New User</h2>
        <form (ngSubmit)="onAddUser()" class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <input [(ngModel)]="newUser.username" name="username" placeholder="Username"
                class="px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" required />
            <input [(ngModel)]="newUser.email" name="email" type="email" placeholder="Email"
                class="px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" required />
            <input [(ngModel)]="newUser.phone" name="phone" placeholder="Phone Number"
                class="px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" required />
            <input [(ngModel)]="newUser.address" name="address" placeholder="Address"
                class="px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" required />
            <button type="submit"
                class="md:col-span-2 bg-green-600 hover:bg-green-700 text-white py-2 rounded-lg font-semibold transition-colors">
                Add User
            </button>
        </form>
    </div>

    <!-- Search and Filter -->
    <div class="bg-white rounded-lg shadow-md p-4 mb-6">
        <input [(ngModel)]="searchTerm" placeholder="Search by username or email..."
            class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" />
    </div>

    <!-- Users Table -->
    <div class="bg-white rounded-lg shadow-md overflow-hidden">
        <table class="w-full">
            <thead class="bg-gray-200">
                <tr>
                    <th class="px-6 py-3 text-left font-semibold text-gray-700">Username</th>
                    <th class="px-6 py-3 text-left font-semibold text-gray-700">Email</th>
                    <th class="px-6 py-3 text-left font-semibold text-gray-700">Phone</th>
                    <th class="px-6 py-3 text-center font-semibold text-gray-700">Books Borrowed</th>
                    <th class="px-6 py-3 text-center font-semibold text-gray-700">Status</th>
                    <th class="px-6 py-3 text-center font-semibold text-gray-700">Actions</th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let user of getFilteredUsers()" class="border-t hover:bg-gray-50">
                    <td class="px-6 py-4 text-gray-800 font-medium">{{ user.username }}</td>
                    <td class="px-6 py-4 text-gray-800">{{ user.email }}</td>
                    <td class="px-6 py-4 text-gray-800">{{ user.phone }}</td>
                    <td class="px-6 py-4 text-center font-semibold">{{ user.borrowedBooks.length }}</td>
                    <td class="px-6 py-4 text-center">
                        <span [class]="
                'px-3 py-1 rounded-full text-white font-semibold ' +
                (user.status === 'active'
                  ? 'bg-green-500'
                  : user.status === 'inactive'
                    ? 'bg-yellow-500'
                    : 'bg-red-500')
              ">
                            {{ user.status | titlecase }}
                        </span>
                    </td>
                    <td class="px-6 py-4 text-center space-x-2">
                        <button *ngIf="user.status === 'active'" (click)="onSuspendUser(user.id)"
                            class="bg-yellow-500 hover:bg-yellow-600 text-white px-3 py-1 rounded text-sm font-semibold transition-colors">
                            Suspend
                        </button>
                        <button *ngIf="user.status !== 'active'" (click)="onActivateUser(user.id)"
                            class="bg-green-500 hover:bg-green-600 text-white px-3 py-1 rounded text-sm font-semibold transition-colors">
                            Activate
                        </button>
                        <button (click)="onDeleteUser(user.id)"
                            class="bg-red-500 hover:bg-red-600 text-white px-3 py-1 rounded text-sm font-semibold transition-colors">
                            Delete
                        </button>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
</div>